Status = "";
fan_image = "";
objects = [];

function preload(){
    fan_image = loadImage("data:image/jpeg;base64,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/");
}

function setup(){
    canvas = createCanvas(640,350);
    canvas.position(315,200);
    object_Detector = ml5.objectDetector('cocossd',modelLoaded);
    document.getElementById("status").innerHTML = "Status: Detecting Objects";
}

function modelLoaded(){
    console.log("Model Loaded!");
    Status = true;
    object_Detector.detect(fan_image,gotResults);
}

function gotResults(error,results){
    if(error){
        console.error(error);
    }
    console.log(results);
    objects = results;
}

function draw(){
    image(fan_image,0,0,640,350);
    if(Status != ""){
        for(i = 0; i < objects.length; i++){
            document.getElementById("status").innerHTML = "Status: Objects Detected";

            fill("#fc0303");
            percent = floor(objects[i].confidence * 100);
            text(objects[i].label + " " + percent + "%",objects[i].x - 14, objects[i].y - 175);
            noFill();
            stroke("#fc0303");
            rect(objects[i].x - 14, objects[i].y - 175, objects[i].width - 2326, objects[i].height - 2850);
        }
    }
}